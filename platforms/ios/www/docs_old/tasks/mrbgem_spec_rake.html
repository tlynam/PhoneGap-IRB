<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <!-- RD version: 0.33.0  -->
    <!--  filepage  -->
  <meta charset="utf-8">
          
  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/b/378 -->
  <!-- meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" -->


	<title>File: mrbgem_spec.rake [Ruby mruby]</title>
  <link rel="stylesheet" href="../css/inuit.css" >
  <link rel="stylesheet" href="../css/grid.inuit.css" >
  <link rel="stylesheet" href="../css/2011.css" type="text/css" >
  <link rel="stylesheet" href="../css/rdoc.css" type="text/css" >
  <!-- rel_prefix  = '..' -->
    
  <!-- rel_prefix = '..'   asset_rel_prefix = '..'  --> 

</head>

<body class="file">
<div id='actionbar' >
<div class='wrapper'>
<ul class='grids g0'>
	<li class='grid-2' ><a href='../../index.html' target='_top' >Home</a></li>
	<li class='grid-2' ><a href='../../core' target='_top' >Core </a></li>
	<li class='grid-2' ><a href='../../stdlib' target='_top' >Std-lib </a></li>

	 <!-- li class='grid-2' ><a href='/zems' target='_top' >Zems</a></li -->
   <li class='grid-2' ><a href='../../downloads' target='_top' >Downloads</a></li>
	 <li class='grid-5 right' id='rd-action-search'><form id="searchbox_011815814100681837392:wnccv6st5qk" action="http://ruby-doc.com/search.html"><input type="hidden" name="cx" value="011815814100681837392:wnccv6st5qk" ><input  id='rd-search-input' name="q" type="text" size="20" >&#160;&#160;<input type="submit" name="sa" value="Search" ><input type="hidden" name="cof" value="FORID:9" ></form></li>
	</ul></div>
</div> <!-- end action bar -->
<!-- VERSION HEADER for mruby NOT FOUND -->          <div class='wrapper'>

  <div id="metadata">
    <div id="home-metadata">
      <header>
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="http://ruby-doc.org/core-mruby/index.html">Home</a>
          <a href="http://ruby-doc.org/core-mruby/index.html#classes">Classes</a>
          <a href="http://ruby-doc.org/core-mruby/index.html#methods">Methods</a>
        </h3>
      </div>
      </header>
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../AUTHORS.html">AUTHORS</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../INSTALL.html">INSTALL</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../LEGAL.html">LEGAL</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../MITL.html">MITL</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../Makefile.html">Makefile</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../NEWS.html">NEWS</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../Rakefile.html">Rakefile</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../TODO.html">TODO</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../examples/mrbgems/c_and_ruby_extension_example/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../examples/mrbgems/c_extension_example/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../examples/mrbgems/ruby_extension_example/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/default_gembox.html">default.gembox</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/full-core_gembox.html">full-core.gembox</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-array-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-bin-debugger/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-bin-mirb/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-bin-mruby-config/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-bin-mruby-config/mruby-config.html">mruby-config</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-bin-mruby-config/mruby-config_bat.html">mruby-config.bat</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-bin-mruby/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-bin-strip/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-enum-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-enum-lazy/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-enumerator/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-eval/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-exit/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-fiber/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-hash-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-kernel-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-math/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-numeric-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-object-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-objectspace/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-print/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-proc-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-random/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-range-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-sprintf/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-string-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-string-utf8/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-struct/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-symbol-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-time/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrbgems/mruby-toplevel-ext/mrbgem_rake.html">mrbgem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../mrblib/mrblib_rake.html">mrblib.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../src/keywords.html">keywords</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../src/lex_def.html">lex.def</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../src/mruby_core_rake.html">mruby_core.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="libmruby_rake.html">libmruby.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="mrbgem_spec_rake.html">mrbgem_spec.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="mrbgems_rake.html">mrbgems.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="mrbgems_test_rake.html">mrbgems_test.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="mruby_build_rake.html">mruby_build.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="mruby_build_commands_rake.html">mruby_build_commands.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="mruby_build_gem_rake.html">mruby_build_gem.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="ruby_ext_rake.html">ruby_ext.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="toolchains/androideabi_rake.html">androideabi.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="toolchains/clang_rake.html">clang.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="toolchains/gcc_rake.html">gcc.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="toolchains/visualcpp_rake.html">visualcpp.rake</a></li>
				
        <!-- local_rel_prefix -->
					<li class="file"><a href="../tools/mrbc/mrbc_rake.html">mrbc.rake</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" ></span></h3>
				<form action="mrbgem_spec_rake.html#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value="" class="quicksearch-field" >
				</fieldset>
				</form>

				<ul class="link-list">
				
        <!--  local_rel_prefix -->
					<li><a href="../ArgumentError.html">ArgumentError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Array.html">Array</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../BinTest_MrubyBinDebugger.html">BinTest_MrubyBinDebugger</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../CRubyExtension.html">CRubyExtension</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Comparable.html">Comparable</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Enumerable.html">Enumerable</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Enumerable/Lazy.html">Enumerable::Lazy</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Enumerator.html">Enumerator</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Enumerator/Generator.html">Enumerator::Generator</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Enumerator/Yielder.html">Enumerator::Yielder</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Exception.html">Exception</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Float.html">Float</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../FloatDomainError.html">FloatDomainError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Hash.html">Hash</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../IndexError.html">IndexError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Integer.html">Integer</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Integral.html">Integral</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Isect.html">Isect</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Kernel.html">Kernel</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../KeyError.html">KeyError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../KlassWithSecret.html">KlassWithSecret</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../LocalJumpError.html">LocalJumpError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../MRBDoc.html">MRBDoc</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../MRBFile.html">MRBFile</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../MRuby.html">MRuby</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Math.html">Math</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../MiniRake.html">MiniRake</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../MiniRake/DSL.html">MiniRake::DSL</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../MiniRake/FileTask.html">MiniRake::FileTask</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../MiniRake/Task.html">MiniRake::Task</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Module.html">Module</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../NameError.html">NameError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../NilClass.html">NilClass</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../NoMethodError.html">NoMethodError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../NotImplementedError.html">NotImplementedError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Numeric.html">Numeric</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Object.html">Object</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Plane.html">Plane</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Proc.html">Proc</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Rake.html">Rake</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../RakeApp.html">RakeApp</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Rand.html">Rand</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Range.html">Range</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../RangeError.html">RangeError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Ray.html">Ray</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../RegexpError.html">RegexpError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../RubyExtension.html">RubyExtension</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Scene.html">Scene</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Sphere.html">Sphere</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../StopIteration.html">StopIteration</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../String.html">String</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Struct.html">Struct</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Symbol.html">Symbol</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../TestEvalConstScope.html">TestEvalConstScope</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Time.html">Time</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../ToplevelTestModule1.html">ToplevelTestModule1</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../ToplevelTestModule2.html">ToplevelTestModule2</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../TypeError.html">TypeError</a></li>
				
        <!--  local_rel_prefix -->
					<li><a href="../Vec.html">Vec</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
			<div id="debugging-toggle"><img src="../images/bug.png"
				alt="toggle debugging" height="16" width="16" ></div>
			
		</div>
	</div>
  <div class='adzbox'  id="azk83167">
      
   <div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/19647/azcarbon_2_1_0_VERT"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div>

   
  </div> 
	<div id="documentation">
		
<p>require ‘pathname’ require ‘forwardable’ require ‘tsort’</p>

<p>module <a href="../MRuby.html">MRuby</a></p>

<pre class="ruby"><span class="ruby-keyword">module</span> <span class="ruby-constant">Gem</span>
  <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>
    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">current</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">LinkerConfig</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(:<span class="ruby-identifier">libraries</span>, :<span class="ruby-identifier">library_paths</span>, :<span class="ruby-identifier">flags</span>, :<span class="ruby-identifier">flags_before_libraries</span>, :<span class="ruby-identifier">flags_after_libraries</span>)

  <span class="ruby-keyword">class</span> <span class="ruby-constant">Specification</span>
    <span class="ruby-identifier">include</span> <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">DSL</span>
    <span class="ruby-identifier">extend</span> <span class="ruby-constant">Forwardable</span>
    <span class="ruby-identifier">def_delegators</span> :<span class="ruby-ivar">@build</span>, :<span class="ruby-identifier">filename</span>, :<span class="ruby-identifier">objfile</span>, :<span class="ruby-identifier">libfile</span>, :<span class="ruby-identifier">exefile</span>

    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">dir</span>, :<span class="ruby-identifier">build</span>
    <span class="ruby-keyword">alias</span> <span class="ruby-identifier">mruby</span> <span class="ruby-identifier">build</span>
    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">build_config_initializer</span>

    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">version</span>
    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">description</span>, :<span class="ruby-identifier">summary</span>
    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">homepage</span>
    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">licenses</span>, :<span class="ruby-identifier">authors</span>
    <span class="ruby-keyword">alias</span> :<span class="ruby-identifier">license=</span> <span class="ruby-operator">:</span><span class="ruby-identifier">licenses</span>=
    <span class="ruby-keyword">alias</span> :<span class="ruby-identifier">author=</span> <span class="ruby-operator">:</span><span class="ruby-identifier">authors</span>=

    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">rbfiles</span>, :<span class="ruby-identifier">objs</span>
    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">test_objs</span>, :<span class="ruby-identifier">test_rbfiles</span>, :<span class="ruby-identifier">test_args</span>
    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">test_preload</span>

    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">bins</span>

    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">requirements</span>
    <span class="ruby-identifier">attr_reader</span> :<span class="ruby-identifier">dependencies</span>, :<span class="ruby-identifier">conflicts</span>

    <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">export_include_paths</span>

    <span class="ruby-identifier">attr_reader</span> :<span class="ruby-identifier">generate_functions</span>

    <span class="ruby-identifier">attr_block</span> <span class="ruby-constant">MRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">Build</span><span class="ruby-operator">::</span><span class="ruby-constant">COMMANDS</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
      <span class="ruby-ivar">@name</span> = <span class="ruby-identifier">name</span>
      <span class="ruby-ivar">@initializer</span> = <span class="ruby-identifier">block</span>
      <span class="ruby-ivar">@version</span> = <span class="ruby-string">&quot;0.0.0&quot;</span>
      <span class="ruby-constant">MRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">Gem</span>.<span class="ruby-identifier">current</span> = <span class="ruby-keyword">self</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">setup</span>
      <span class="ruby-constant">MRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">Gem</span>.<span class="ruby-identifier">current</span> = <span class="ruby-keyword">self</span>
      <span class="ruby-constant">MRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">Build</span><span class="ruby-operator">::</span><span class="ruby-constant">COMMANDS</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">command</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-node">&quot;@#{command}&quot;</span>, <span class="ruby-ivar">@build</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">command</span>).<span class="ruby-identifier">clone</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@linker</span> = <span class="ruby-constant">LinkerConfig</span>.<span class="ruby-identifier">new</span>([], [], [], [])

      <span class="ruby-ivar">@rbfiles</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-node">&quot;#{dir}/mrblib  .rb&quot;</span>).<span class="ruby-identifier">sort</span>
      <span class="ruby-ivar">@objs</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-node">&quot;#{dir}/src/*.{c,cpp,cxx,cc,m,asm,s,S}&quot;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">objfile</span>(<span class="ruby-identifier">f</span>.<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-ivar">@dir</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">pathmap</span>(<span class="ruby-node">&quot;#{build_dir}/%X&quot;</span>))
      <span class="ruby-keyword">end</span>

      <span class="ruby-ivar">@generate_functions</span> = <span class="ruby-operator">!</span>(<span class="ruby-ivar">@rbfiles</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@objs</span>.<span class="ruby-identifier">empty?</span>)
      <span class="ruby-ivar">@objs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">objfile</span>(<span class="ruby-node">&quot;#{build_dir}/gem_init&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@generate_functions</span>

      <span class="ruby-ivar">@test_rbfiles</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-node">&quot;#{dir}/test/*.rb&quot;</span>)
      <span class="ruby-ivar">@test_objs</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-node">&quot;#{dir}/test/*.{c,cpp,cxx,cc,m,asm,s,S}&quot;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">objfile</span>(<span class="ruby-identifier">f</span>.<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">dir</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">pathmap</span>(<span class="ruby-node">&quot;#{build_dir}/%X&quot;</span>))
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@custom_test_init</span> = <span class="ruby-operator">!</span><span class="ruby-ivar">@test_objs</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@test_preload</span> = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># 'test/assert.rb'</span>
      <span class="ruby-ivar">@test_args</span> = {}

      <span class="ruby-ivar">@bins</span> = []

      <span class="ruby-ivar">@requirements</span> = []
      <span class="ruby-ivar">@dependencies</span>, <span class="ruby-ivar">@conflicts</span> = [], []
      <span class="ruby-ivar">@export_include_paths</span> = []
      <span class="ruby-ivar">@export_include_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{dir}/include&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-node">&quot;#{dir}/include&quot;</span>

      <span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-ivar">@initializer</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">name</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">licenses</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">authors</span>
        <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;#{name || dir} required to set name, license(s) and author(s)&quot;</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">build</span>.<span class="ruby-identifier">libmruby</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@objs</span>

      <span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-ivar">@build_config_initializer</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@build_config_initializer</span>

      <span class="ruby-identifier">compilers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">compiler</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">compiler</span>.<span class="ruby-identifier">define_rules</span> <span class="ruby-identifier">build_dir</span>, <span class="ruby-node">&quot;#{dir}&quot;</span>
        <span class="ruby-identifier">compiler</span>.<span class="ruby-identifier">defines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">%Q[MRBGEM_#{funcname.upcase}_VERSION=#{version}]</span>
        <span class="ruby-identifier">compiler</span>.<span class="ruby-identifier">include_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{dir}/include&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-node">&quot;#{dir}/include&quot;</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">define_gem_init_builder</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@generate_functions</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">add_dependency</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">requirements</span>)
      <span class="ruby-identifier">default_gem</span> = <span class="ruby-identifier">requirements</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">requirements</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">requirements</span> = [<span class="ruby-string">'&gt;= 0.0.0'</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">requirements</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">requirements</span>.<span class="ruby-identifier">flatten!</span>
      <span class="ruby-ivar">@dependencies</span> <span class="ruby-operator">&lt;&lt;</span> {:<span class="ruby-identifier">gem</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>, :<span class="ruby-identifier">requirements</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">requirements</span>, :<span class="ruby-identifier">default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">default_gem</span>}
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">add_conflict</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">req</span>)
      <span class="ruby-ivar">@conflicts</span> <span class="ruby-operator">&lt;&lt;</span> {:<span class="ruby-identifier">gem</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>, :<span class="ruby-identifier">requirements</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">req</span>}
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">bin</span>=(<span class="ruby-identifier">bin</span>)
      <span class="ruby-ivar">@bins</span> = [<span class="ruby-identifier">bin</span>].<span class="ruby-identifier">flatten</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">build_dir</span>
      <span class="ruby-node">&quot;#{build.build_dir}/mrbgems/#{name}&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_rbireps</span>
      <span class="ruby-node">&quot;#{build_dir}/gem_test.c&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">funcname</span>
      <span class="ruby-ivar">@funcname</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">'-'</span>, <span class="ruby-string">'_'</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">compilers</span>
      <span class="ruby-constant">MRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">Build</span><span class="ruby-operator">::</span><span class="ruby-constant">COMPILERS</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-node">&quot;@#{c}&quot;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">define_gem_init_builder</span>
      <span class="ruby-identifier">file</span> <span class="ruby-identifier">objfile</span>(<span class="ruby-node">&quot;#{build_dir}/gem_init&quot;</span>) =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{build_dir}/gem_init.c&quot;</span>
      <span class="ruby-identifier">file</span> <span class="ruby-node">&quot;#{build_dir}/gem_init.c&quot;</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">build</span>.<span class="ruby-identifier">mrbcfile</span>, <span class="ruby-keyword">__FILE__</span>] <span class="ruby-operator">+</span> [<span class="ruby-identifier">rbfiles</span>].<span class="ruby-identifier">flatten</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
        <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">build_dir</span>
        <span class="ruby-identifier">generate_gem_init</span>(<span class="ruby-node">&quot;#{build_dir}/gem_init.c&quot;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_gem_init</span>(<span class="ruby-identifier">fname</span>)
      <span class="ruby-identifier">open</span>(<span class="ruby-identifier">fname</span>, <span class="ruby-string">'w'</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">print_gem_init_header</span> <span class="ruby-identifier">f</span>
        <span class="ruby-identifier">build</span>.<span class="ruby-identifier">mrbc</span>.<span class="ruby-identifier">run</span> <span class="ruby-identifier">f</span>, <span class="ruby-identifier">rbfiles</span>, <span class="ruby-node">&quot;gem_mrblib_irep_#{funcname}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rbfiles</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[void mrb_#{funcname}_gem_init(mrb_state *mrb);]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[void mrb_#{funcname}_gem_final(mrb_state *mrb);]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[void GENERATED_TMP_mrb_#{funcname}_gem_init(mrb_state *mrb) {]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[  int ai = mrb_gc_arena_save(mrb);]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[  mrb_#{funcname}_gem_init(mrb);]</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">objs</span> <span class="ruby-operator">!=</span> [<span class="ruby-identifier">objfile</span>(<span class="ruby-node">&quot;#{build_dir}/gem_init&quot;</span>)]
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rbfiles</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[  mrb_load_irep(mrb, gem_mrblib_irep_#{funcname});]</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[  if (mrb-&gt;exc) {]</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[    mrb_print_error(mrb);]</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[    exit(EXIT_FAILURE);]</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[  }]</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[  mrb_gc_arena_restore(mrb, ai);]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[}]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[void GENERATED_TMP_mrb_#{funcname}_gem_final(mrb_state *mrb) {]</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[  mrb_#{funcname}_gem_final(mrb);]</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">objs</span> <span class="ruby-operator">!=</span> [<span class="ruby-identifier">objfile</span>(<span class="ruby-node">&quot;#{build_dir}/gem_init&quot;</span>)]
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[}]</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span> <span class="ruby-comment"># generate_gem_init</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">print_gem_comment</span>(<span class="ruby-identifier">f</span>)
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[/*]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[ * This file is loading the irep]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[ * Ruby GEM code.]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[ *]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[ * IMPORTANT:]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[ *   This file was generated!]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[ *   All manual changes will get lost.]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">%Q[   ]</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">print_gem_init_header</span>(<span class="ruby-identifier">f</span>)
      <span class="ruby-identifier">print_gem_comment</span>(<span class="ruby-identifier">f</span>)
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &lt;stdlib.h&gt;]</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rbfiles</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &quot;mruby.h&quot;]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &quot;mruby/irep.h&quot;]</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rbfiles</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">print_gem_test_header</span>(<span class="ruby-identifier">f</span>)
      <span class="ruby-identifier">print_gem_comment</span>(<span class="ruby-identifier">f</span>)
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &lt;stdio.h&gt;]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &lt;stdlib.h&gt;]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &quot;mruby.h&quot;]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &quot;mruby/irep.h&quot;]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &quot;mruby/variable.h&quot;]</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q[#include &quot;mruby/hash.h&quot;]</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">test_args</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_dependencies</span>
      [<span class="ruby-ivar">@name</span>]
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">custom_test_init?</span>
      <span class="ruby-ivar">@custom_test_init</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">version_ok?</span>(<span class="ruby-identifier">req_versions</span>)
      <span class="ruby-identifier">req_versions</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">cmp</span>, <span class="ruby-identifier">ver</span> = <span class="ruby-identifier">req</span>.<span class="ruby-identifier">split</span>
        <span class="ruby-identifier">cmp_result</span> = <span class="ruby-constant">Version</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">version</span>) <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-constant">Version</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">ver</span>)
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">cmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">'='</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">cmp_result</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">'!='</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">cmp_result</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">'&gt;'</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">cmp_result</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">'&lt;'</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">cmp_result</span> <span class="ruby-operator">==</span> <span class="ruby-value">-1</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">'&gt;='</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">cmp_result</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">'&lt;='</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">cmp_result</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">'~&gt;'</span>
          <span class="ruby-constant">Version</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">version</span>).<span class="ruby-identifier">twiddle_wakka_ok?</span>(<span class="ruby-constant">Version</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">ver</span>))
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;Comparison not possible with '#{cmp}'&quot;</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>.<span class="ruby-identifier">all?</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> <span class="ruby-comment"># Specification</span>

  <span class="ruby-keyword">class</span> <span class="ruby-constant">Version</span>
    <span class="ruby-identifier">include</span> <span class="ruby-constant">Comparable</span>
    <span class="ruby-identifier">include</span> <span class="ruby-constant">Enumerable</span>

    <span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;=&gt;</span>(<span class="ruby-identifier">other</span>)
      <span class="ruby-identifier">ret</span> = <span class="ruby-value">0</span>
      <span class="ruby-identifier">own</span> = <span class="ruby-identifier">to_enum</span>

      <span class="ruby-identifier">other</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">oth</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">begin</span>
          <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">own</span>.<span class="ruby-identifier">next</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">oth</span>
        <span class="ruby-keyword">rescue</span> <span class="ruby-constant">StopIteration</span>
          <span class="ruby-identifier">ret</span> = <span class="ruby-value">0</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">oth</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ret</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">ret</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># ~&gt; compare algorithm</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Example:</span>
    <span class="ruby-comment">#    ~&gt; 2.2   means &gt;= 2.2.0 and &lt; 3.0.0</span>
    <span class="ruby-comment">#    ~&gt; 2.2.0 means &gt;= 2.2.0 and &lt; 2.3.0</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">twiddle_wakka_ok?</span>(<span class="ruby-identifier">other</span>)
      <span class="ruby-identifier">gr_or_eql</span> = (<span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">still_minor</span> = (<span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">skip_minor</span>) <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">gr_or_eql</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">still_minor</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">skip_minor</span>
      <span class="ruby-identifier">a</span> = <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">dup</span>
      <span class="ruby-identifier">a</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-value">-1</span>)
      <span class="ruby-identifier">a</span>[<span class="ruby-value">-1</span>] = <span class="ruby-identifier">a</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">succ</span>
      <span class="ruby-identifier">a</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">str</span>)
      <span class="ruby-ivar">@str</span> = <span class="ruby-identifier">str</span>
      <span class="ruby-ivar">@ary</span> = <span class="ruby-ivar">@str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">'.'</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span>:<span class="ruby-identifier">to_i</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>); <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>); <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">index</span>); <span class="ruby-ivar">@ary</span>[<span class="ruby-identifier">index</span>]; <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">index</span>, <span class="ruby-identifier">value</span>)
      <span class="ruby-ivar">@ary</span>[<span class="ruby-identifier">index</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-ivar">@str</span> = <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">'.'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">slice!</span>(<span class="ruby-identifier">index</span>)
      <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-identifier">index</span>)
      <span class="ruby-ivar">@str</span> = <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">'.'</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> <span class="ruby-comment"># Version</span>

  <span class="ruby-keyword">class</span> <span class="ruby-constant">List</span>
    <span class="ruby-identifier">include</span> <span class="ruby-constant">Enumerable</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>
      <span class="ruby-ivar">@ary</span> = []
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">b</span>)
      <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">b</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">gem</span>)
      <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">detect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">dir</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">gem</span>.<span class="ruby-identifier">dir</span> }
        <span class="ruby-ivar">@ary</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">gem</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># GEM was already added to this list</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_gem_table</span> <span class="ruby-identifier">build</span>
      <span class="ruby-identifier">gem_table</span> = <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">reduce</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">res</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">res</span>[<span class="ruby-identifier">v</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">v</span>; <span class="ruby-identifier">res</span> }

      <span class="ruby-identifier">default_gems</span> = []
      <span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">g</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">default_gems</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">dep</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">default</span>] <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">gem_table</span>.<span class="ruby-identifier">key?</span> <span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">gem</span>]
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">until</span> <span class="ruby-identifier">default_gems</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">def_gem</span> = <span class="ruby-identifier">default_gems</span>.<span class="ruby-identifier">pop</span>

        <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">build</span>.<span class="ruby-identifier">gem</span> <span class="ruby-identifier">def_gem</span>[:<span class="ruby-identifier">default</span>]
        <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;Invalid gem name: #{spec.name} (Expected: #{def_gem[:gem]})&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">def_gem</span>[:<span class="ruby-identifier">gem</span>]
        <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">setup</span>

        <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">default_gems</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">dep</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">default</span>] <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">gem_table</span>.<span class="ruby-identifier">key?</span> <span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">gem</span>]
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">gem_table</span>[<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">spec</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">g</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">name</span> = <span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">gem</span>]
          <span class="ruby-identifier">req_versions</span> = <span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">requirements</span>]
          <span class="ruby-identifier">dep_g</span> = <span class="ruby-identifier">gem_table</span>[<span class="ruby-identifier">name</span>]

          <span class="ruby-comment"># check each GEM dependency against all available GEMs</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">dep_g</span>.<span class="ruby-identifier">nil?</span>
            <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;The GEM '#{g.name}' depends on the GEM '#{name}' but it could not be found&quot;</span>
          <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">unless</span> <span class="ruby-identifier">dep_g</span>.<span class="ruby-identifier">version_ok?</span> <span class="ruby-identifier">req_versions</span>
            <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;#{name} version should be #{req_versions.join(' and ')} but was '#{dep_g.version}'&quot;</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">cfls</span> = <span class="ruby-identifier">g</span>.<span class="ruby-identifier">conflicts</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">cfl_g</span> = <span class="ruby-identifier">gem_table</span>[<span class="ruby-identifier">c</span>[:<span class="ruby-identifier">gem</span>]]
          <span class="ruby-identifier">cfl_g</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">cfl_g</span>.<span class="ruby-identifier">version_ok?</span>(<span class="ruby-identifier">c</span>[:<span class="ruby-identifier">requirements</span>] <span class="ruby-operator">||</span> [<span class="ruby-string">'&gt;= 0.0.0'</span>])
        }.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{c[:gem]}(#{gem_table[c[:gem]].version})&quot;</span> }
        <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;Conflicts of gem `#{g.name}` found: #{cfls.join ', '}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">cfls</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">gem_table</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">tsort_dependencies</span> <span class="ruby-identifier">ary</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">all_dependency_listed</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">all_dependency_listed</span>
        <span class="ruby-identifier">left</span> = <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">dup</span>
        <span class="ruby-keyword">until</span> <span class="ruby-identifier">left</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">v</span> = <span class="ruby-identifier">left</span>.<span class="ruby-identifier">pop</span>
          <span class="ruby-identifier">table</span>[<span class="ruby-identifier">v</span>].<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">left</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">gem</span>]
            <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">gem</span>]
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">uniq!</span>
      <span class="ruby-identifier">table</span>.<span class="ruby-identifier">instance_variable_set</span> :<span class="ruby-ivar">@root_gems</span>, <span class="ruby-identifier">ary</span>
      <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">table</span>
        <span class="ruby-identifier">include</span> <span class="ruby-constant">TSort</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier">tsort_each_node</span> <span class="ruby-operator">&amp;</span><span class="ruby-identifier">b</span>
          <span class="ruby-ivar">@root_gems</span>.<span class="ruby-identifier">each</span> <span class="ruby-operator">&amp;</span><span class="ruby-identifier">b</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">def</span> <span class="ruby-identifier">tsort_each_child</span>(<span class="ruby-identifier">n</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">b</span>)
          <span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">n</span>).<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">b</span>.<span class="ruby-identifier">call</span> <span class="ruby-identifier">v</span>[:<span class="ruby-identifier">gem</span>]
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">table</span>.<span class="ruby-identifier">tsort</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">table</span>[<span class="ruby-identifier">v</span>] }
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">TSort</span><span class="ruby-operator">::</span><span class="ruby-constant">Cyclic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
        <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;Circular mrbgem dependency found: #{e.message}&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">check</span>(<span class="ruby-identifier">build</span>)
      <span class="ruby-identifier">gem_table</span> = <span class="ruby-identifier">generate_gem_table</span> <span class="ruby-identifier">build</span>

      <span class="ruby-ivar">@ary</span> = <span class="ruby-identifier">tsort_dependencies</span> <span class="ruby-identifier">gem_table</span>.<span class="ruby-identifier">keys</span>, <span class="ruby-identifier">gem_table</span>, <span class="ruby-keyword">true</span>

      <span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">import_include_paths</span>(<span class="ruby-identifier">g</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">import_include_paths</span>(<span class="ruby-identifier">g</span>)
      <span class="ruby-identifier">gem_table</span> = <span class="ruby-ivar">@ary</span>.<span class="ruby-identifier">reduce</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">res</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">res</span>[<span class="ruby-identifier">v</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">v</span>; <span class="ruby-identifier">res</span> }
      <span class="ruby-identifier">g</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">dep_g</span> = <span class="ruby-identifier">gem_table</span>[<span class="ruby-identifier">dep</span>[:<span class="ruby-identifier">gem</span>]]
        <span class="ruby-comment"># We can do recursive call safely</span>
        <span class="ruby-comment"># as circular dependency has already detected in the caller.</span>
        <span class="ruby-identifier">import_include_paths</span>(<span class="ruby-identifier">dep_g</span>)

        <span class="ruby-identifier">g</span>.<span class="ruby-identifier">compilers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">compiler</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">compiler</span>.<span class="ruby-identifier">include_paths</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">dep_g</span>.<span class="ruby-identifier">export_include_paths</span>
          <span class="ruby-identifier">g</span>.<span class="ruby-identifier">export_include_paths</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">dep_g</span>.<span class="ruby-identifier">export_include_paths</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> <span class="ruby-comment"># List</span>
<span class="ruby-keyword">end</span> <span class="ruby-comment"># Gem</span>

<span class="ruby-constant">GemBox</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
<span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">GemBox</span>
  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">path</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">new</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>); <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword">self</span>); <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">config=</span>(<span class="ruby-identifier">obj</span>); <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">obj</span>; <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">gem</span>(<span class="ruby-identifier">gemdir</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>); <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">gem</span>(<span class="ruby-identifier">gemdir</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>); <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> <span class="ruby-comment"># GemBox</span>
</pre>

<p>end # <a href="../MRuby.html">MRuby</a></p>

	</div>

	<div id="validator-badges">
		<p><small>Generated with Rubydoc Rdoc Generator 0.33.0</small>.</p>
	</div>

    
     <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-335317-2', 'auto');
  ga('send', 'pageview');

</script>


    


</body>

</html>

